<head>
	<!-- Load plotly.js into the DOM -->
	<script src='https://cdn.plot.ly/plotly-2.6.3.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
</head>

<body>
	<div id='myDiv' style="width:1000px;height:I 800px;"><!-- Plotly chart will be drawn inside this DIV --></div>
  <div id="tester" style="width:600px;height:250px;"></div>
  <script>
      d3.csv('https://raw.githubusercontent.com/NicholasEng22/TrackingCrimeAndPunishment/main/resources/crime_and_incarceration_by_state.csv?token=AOVV4RQBVRWPFQOIK3LSDSLBTERIA', function(err, rows){
				console.log(rows);
				function unpack(rows, key) {
            return rows.map(function(row) { return row[key]; });
        }

        var data = [{
            type: 'choropleth',
            locationmode: 'USA-states',
            locations: unpack(rows, 'jurisdiction'),
            z: unpack(rows, 'prisoner_count'),
            text: unpack(rows, 'jurisdiction'),
            zmin: 0,
            zmax: 17000,
            colorscale: [
                [0, 'rgb(242,240,247)'], [0.2, 'rgb(218,218,235)'],
                [0.4, 'rgb(188,189,220)'], [0.6, 'rgb(158,154,200)'],
                [0.8, 'rgb(117,107,177)'], [1, 'rgb(84,39,143)']
            ],
            colorbar: {
                title: 'Prison Count',
                thickness: 0.2
            },
            marker: {
                line:{
                    color: 'rgb(255,255,255)',
                    width: 2
                }
            }
        }];


        var layout = {
            title: 'All Prison',
            geo:{
                scope: 'usa',
                showlakes: true,
                lakecolor: 'rgb(255,255,255)'
            }
        };
        console.log("running");
        Plotly.newPlot("myDiv", data, layout, {showLink: false});
    });

  </script>
</body>
